function fetchGeo(){navigator.geolocation.getCurrentPosition(makeColor,errorFeedback,{timeout:3e4,maximumAge:6e5})}function errorFeedback(t){window.isSecureContext===!1||0==t.message.indexOf("Only secure origins are allowed")?domOutput.textContent="Browser prevents geolocation use via non-secure (HTTP) page.":(alert("Error - "+t.message),domOutput.textContent="Geolocation failed! Check settings and signal. Reload page and try again.")}function makeColor(t){domOutput.textContent="",longHue=Math.round(t.coords.longitude>0?t.coords.longitude:t.coords.longitude- -360),latSat=Math.round(t.coords.latitude>0?(180-Math.round(t.coords.latitude)-90)/lightUnit:(180-(Math.round(t.coords.latitude)- -90))/lightUnit);var e=document.createElement("div"),o="hsla("+longHue+", "+latSat+"%, 50%, 1)";if(e.className="color txt-small notranslate",e.textContent=o,domOutput.style.backgroundColor=o,domOutput.appendChild(e),"undefined"!=typeof Windows&&void 0!==Windows.UI&&void 0!==Windows.UI.Notifications){var n=new Windows.Data.Xml.Dom.XmlDocument,i=n.createElement("tile");n.appendChild(i);var a=n.createElement("visual");a.setAttribute("branding","nameAndLogo"),i.appendChild(a);var r=n.createElement("binding");r.setAttribute("template","TileMedium"),a.appendChild(r);var d=n.createElement("text");d.setAttribute("hint-style","base"),d.setAttribute("hint-wrap","true"),d.innerText=o,r.appendChild(d);var u=n.createElement("text");u.setAttribute("hint-style","captionSubtle"),u.setAttribute("hint-wrap","true"),u.innerText=t.coords.latitude+","+t.coords.longitude,r.appendChild(u);var l=Windows.UI.Notifications,s=new l.TileNotification(n);l.TileUpdateManager.createTileUpdaterForApplication().update(s)}domOutput.focus()}var domButton=document.getElementById("huebutton"),domOutput=document.getElementById("output"),domLocale=document.getElementById("longlat"),lightUnit=1.8,longHue,latSat,domFooter=document.querySelector(".txt-small");navigator.geolocation?(navigator.permissions&&navigator.permissions.query({name:"geolocation"}).then(function(t){function e(){"denied"===t.state&&(domOutput.textContent="Geolocation required. Allow location when prompted by your browser."),"prompt"===t.state?domOutput.textContent="App requires geolocation. Allow location when prompted by your browser.":"granted"===t.state&&(domOutput.textContent="")}e(),t.addEventListener("change",e,!1)}),"serviceWorker"in navigator&&navigator.serviceWorker.register("sw.js",{scope:'./'}).then(function(){console.log("Service Worker Registered!"),domFooter.textContent+=" â€¢ Available Offline"}).catch(function(t){console.log("Registration failed with "+t)}),domButton.addEventListener("click",fetchGeo,!1)):(domOutput.textContent="This app uses features not supported by your browser",domOutput.focus());