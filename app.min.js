var longHue,latSat,domButton=document.getElementById("huebutton"),domOutput=document.getElementById("output"),domLocale=document.getElementById("longlat"),lightUnit=1.8,domColorvalue=document.createElement("div"),domFooter=document.querySelector(".txt-small");if(navigator.geolocation){function fetchGeo(t){navigator.geolocation.getCurrentPosition(makeColor,errorFeedback,{timeout:3e4,maximumAge:6e5}),domOutput.textContent="",domColorvalue.classList.add("color","txt-small","notranslate"),domColorvalue.textContent="Finding…",domOutput.appendChild(domColorvalue)}function errorFeedback(t){!1===window.isSecureContext||0==t.message.indexOf("Only secure origins are allowed")?domOutput.textContent="Browser prevents geolocation use via non-secure (HTTP) page.":(alert("Error - "+t.message),domOutput.textContent="Geolocation failed! Check settings and signal. Reload page and try again.")}function makeColor(t){domOutput.textContent="",longHue=t.coords.longitude>0?Math.round(t.coords.longitude):Math.round(t.coords.longitude- -360),latSat=t.coords.latitude>0?Math.round((180-Math.round(t.coords.latitude)-90)/lightUnit):Math.round((180-(Math.round(t.coords.latitude)- -90))/lightUnit);var e="hsla("+longHue+", "+latSat+"%, 50%, 1)";if(domColorvalue.className="color txt-small notranslate",domColorvalue.textContent=e,domOutput.style.backgroundColor=e,domOutput.appendChild(domColorvalue),"undefined"!=typeof Windows&&void 0!==Windows.UI&&void 0!==Windows.UI.Notifications){var o=new Windows.Data.Xml.Dom.XmlDocument,n=o.createElement("tile");o.appendChild(n);var a=o.createElement("visual");a.setAttribute("branding","nameAndLogo"),n.appendChild(a);var i=o.createElement("binding");i.setAttribute("template","TileMedium"),a.appendChild(i);var r=o.createElement("text");r.setAttribute("hint-style","base"),r.setAttribute("hint-wrap","true"),r.innerText=e,i.appendChild(r);var d=o.createElement("text");d.setAttribute("hint-style","captionSubtle"),d.setAttribute("hint-wrap","true"),d.innerText=t.coords.latitude+","+t.coords.longitude,i.appendChild(d);var l=Windows.UI.Notifications,u=new l.TileNotification(o);l.TileUpdateManager.createTileUpdaterForApplication().update(u)}domOutput.focus()}navigator.permissions&&navigator.permissions.query({name:"geolocation"}).then(function(t){function e(){"denied"===t.state&&(domOutput.textContent="Geolocation required. Allow location when prompted by your browser."),"prompt"===t.state?domOutput.textContent="App requires geolocation. Allow location when prompted by your browser.":"granted"===t.state&&(domOutput.textContent="")}e(),t.addEventListener("change",e,!1)}),"serviceWorker"in navigator&&navigator.serviceWorker.register("sw.js",{scope:"./"}).then(function(t){console.log("Service Worker Registered!"),domFooter.textContent+=" • Available Offline"}).catch(function(t){console.log("Registration failed with "+t)}),domButton.addEventListener("click",fetchGeo,!1)}else domOutput.textContent="This app uses features not supported by your browser",domOutput.focus();