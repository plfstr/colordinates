function fetchGeo(a){navigator.geolocation.getCurrentPosition(makeColor,errorFeedback,{timeout:3e4,maximumAge:6e5})}function errorFeedback(a){0==a.message.indexOf("Only secure origins are allowed")?domOutput.textContent="Browser prevents geolocation use via non-secure (HTTP) page.":(alert("Error - "+a.message),domOutput.textContent="Geolocation failed! Check settings and signal. Reload page and try again.")}function makeColor(a){domOutput.textContent="",longHue=a.coords.longitude>0?Math.round(a.coords.longitude):Math.round(a.coords.longitude- -360),latSat=a.coords.latitude>0?Math.round((180-Math.round(a.coords.latitude)-90)/lightUnit):Math.round((180-(Math.round(a.coords.latitude)- -90))/lightUnit);var b=document.createElement("div"),c="hsla("+longHue+", "+latSat+"%, 50%, 1)";if(b.className="color txt-small notranslate",b.textContent=c,domOutput.setAttribute("style","background-color: "+c),domOutput.appendChild(b),"undefined"!=typeof Windows&&"undefined"!=typeof Windows.UI&&"undefined"!=typeof Windows.UI.Notifications){var d=new Windows.Data.Xml.Dom.XmlDocument,e=d.createElement("tile");d.appendChild(e);var f=d.createElement("visual");f.setAttribute("branding","nameAndLogo"),e.appendChild(f);var g=d.createElement("binding");g.setAttribute("template","TileMedium"),f.appendChild(g);var h=d.createElement("text");h.setAttribute("hint-style","base"),h.setAttribute("hint-wrap","true"),h.innerText=c,g.appendChild(h);var i=d.createElement("text");i.setAttribute("hint-style","captionSubtle"),i.setAttribute("hint-wrap","true"),i.innerText=a.coords.latitude+","+a.coords.longitude,g.appendChild(i);var j=Windows.UI.Notifications,k=new j.TileNotification(d);j.TileUpdateManager.createTileUpdaterForApplication().update(k)}domOutput.focus()}var domButton=document.getElementById("huebutton"),domOutput=document.getElementById("output"),domLocale=document.getElementById("longlat"),lightUnit=1.8,longHue,latSat;navigator.geolocation?(navigator.permissions&&navigator.permissions.query({name:"geolocation"}).then(function(a){function b(){"denied"===a.state&&(domOutput.textContent="Geolocation required. Allow location when prompted by your browser."),"prompt"===a.state?domOutput.textContent="App requires geolocation. Allow location when prompted by your browser.":"granted"===a.state&&(domOutput.textContent="")}b(),a.addEventListener("change",b,!1)}),domButton.addEventListener("click",fetchGeo,!1)):(domOutput.textContent="This app uses features not supported by your browser",domOutput.focus());